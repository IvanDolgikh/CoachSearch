import{d as I,j as T,t as j,l as M,n as C,c as U,a as e,v as n,x as o,u as l,y as i,b as O,f as L,q as W,o as x}from"./index-Y51w8-xj.js";import{u as G,_ as H}from"./CoachesFiltersSelectButton.vue_vue_type_style_index_0_lang-enT1tDHP.js";import{s as N,b as w}from"./api-yE4gVfV1.js";const J={class:"user-edit"},K={key:0,class:"user-edit__container"},Q=e("span",{class:"pi pi-times"},null,-1),X=[Q],Y={class:"user-edit__base-data-container"},Z=e("p",{class:"user-edit__title"},"Личная информация",-1),ee={class:"user-edit__input-container"},te=e("span",null,"ФИО",-1),se={class:"user-edit__input-container"},ae=e("span",null,"Номер телефона",-1),le={class:"user-edit__input-container"},ne=e("span",null,"Электронная почта",-1),oe={class:"user-edit__input-textarea-container"},ie=e("span",null,"Расскажите о себе",-1),ue={key:0},re={class:"user-edit__input-container"},de=e("span",null,"Возраст",-1),_e={class:"user-edit__input-container"},pe=e("span",null,"Опыт работы",-1),ce={class:"user-edit__input-container"},me=e("span",null,"Место проведения тренировок",-1),ve={class:"user-edit__input-container"},fe=e("p",{class:"user-edit__title"},"Специализация",-1),he={class:"user-edit__social"},be={class:"user-edit__input-image-container"},ge=e("p",{class:"user-edit__title"},"Ваше фото",-1),ye=["src"],ke=e("p",{class:"user-edit__title"},"Профили в соцсетях",-1),Ue={class:"user-edit__input-container"},xe=e("span",null,"Вконтакте",-1),Se={class:"user-edit__input-container"},Ve=e("span",null,"Телеграмм",-1),Ce=e("button",{class:"user-edit__button"}," Сохранить ",-1),Ae=I({__name:"EditProfile",props:{userData:{}},emits:["close-modal","update-data"],setup(A,{emit:q}){const S=q,g=G(),V=T(),z=localStorage.getItem("role")||"",y=A,{avatarUrl:k,vkLink:p,telegramLink:c,fullName:m,phoneNumber:v,email:f,info:h,address:r,age:d,workExperience:_}=j(y.userData),b=M(k.value),D=C(()=>{var s;const a=(s=y.userData)==null?void 0:s.specializations,t=[];if(a)for(let u=0;u<a.length;u++)t.push({name:a[u]});return t});g.valueSpecialization=D.value;const B=a=>{var s;const t=(s=a.target.files)==null?void 0:s[0];if(t){k.value=t;const u=new FileReader;u.onload=()=>{u.result&&(b.value=u.result)},u.readAsDataURL(t)}},R=a=>a instanceof ArrayBuffer,$=C(()=>R(b.value)?URL.createObjectURL(new Blob([b.value])):b.value),E=`${w}api/customer/profile`,P=`${w}api/coach/profile`,F=async()=>{V.loading=!0;const a={email:f.value,phoneNumber:v.value,fullName:m.value,info:h.value,telegramLink:c.value,vkLink:p.value,avatar:k.value,specializations:g.valueSpecialization.map(s=>s.name),address:r==null?void 0:r.value,age:d==null?void 0:d.value,workExperience:_==null?void 0:_.value};let t;return localStorage.getItem("role")==="Customer"?t=await N(E,a):t=await N(P,a),g.valueSpecialization=[],S("close-modal"),S("update-data",t),V.loading=!1,t};return(a,t)=>(x(),U("div",J,[y.userData?(x(),U("div",K,[e("button",{class:"user-edit__button-cancel",onClick:t[0]||(t[0]=s=>a.$emit("close-modal"))},X),e("form",{class:"user-edit__form",method:"post",onSubmit:t[10]||(t[10]=W(s=>F(),["prevent"]))},[e("div",Y,[Z,e("label",ee,[te,n(e("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=s=>i(m)?m.value=s:null),name:"FullName",required:""},null,512),[[o,l(m)]])]),e("label",se,[ae,n(e("input",{type:"tel","onUpdate:modelValue":t[2]||(t[2]=s=>i(v)?v.value=s:null),name:"PhoneNumber",required:"",maxlength:"11"},null,512),[[o,l(v)]])]),e("label",le,[ne,n(e("input",{type:"Email","onUpdate:modelValue":t[3]||(t[3]=s=>i(f)?f.value=s:null),name:"Email",required:""},null,512),[[o,l(f)]])]),e("label",oe,[ie,n(e("textarea",{name:"Info","onUpdate:modelValue":t[4]||(t[4]=s=>i(h)?h.value=s:null),id:"",cols:"30",rows:"5"},null,512),[[o,l(h)]])]),l(z)==="Coach"?(x(),U("div",ue,[e("label",re,[de,n(e("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=s=>i(d)?d.value=s:null),name:"Age",required:"",maxlength:"2"},null,512),[[o,l(d)]])]),e("label",_e,[pe,n(e("input",{type:"text","onUpdate:modelValue":t[6]||(t[6]=s=>i(_)?_.value=s:null),name:"WorkExperience",required:"",maxlength:"2"},null,512),[[o,l(_)]])]),e("label",ce,[me,n(e("input",{type:"text","onUpdate:modelValue":t[7]||(t[7]=s=>i(r)?r.value=s:null),name:"Address",required:""},null,512),[[o,l(r)]])]),e("label",ve,[fe,O(H)])])):L("",!0)]),e("div",he,[e("label",be,[ge,e("img",{class:"user-edit__custom-input-image",src:$.value,alt:""},null,8,ye),e("input",{type:"file",class:"visually-hidden",name:"Avatar",onChange:B},null,32)]),ke,e("label",Ue,[xe,n(e("input",{type:"text","onUpdate:modelValue":t[8]||(t[8]=s=>i(p)?p.value=s:null),name:"VkLink"},null,512),[[o,l(p)]])]),e("label",Se,[Ve,n(e("input",{type:"text","onUpdate:modelValue":t[9]||(t[9]=s=>i(c)?c.value=s:null),name:"TelegramLink"},null,512),[[o,l(c)]])])]),Ce],32)])):L("",!0)]))}});export{Ae as _};
