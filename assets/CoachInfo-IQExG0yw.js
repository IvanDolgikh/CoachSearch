import{d as b,o as a,c as i,a as o,G as r,j as x,k as P,q as U,v as V,x as F,f as k,J as O,M as H,p as L,g as E,C as $,_ as N,l as I,n as T,F as J,b as d,A as g,u as p,E as q,w as K,T as R,P as Y,L as Q}from"./index-Y51w8-xj.js";import{_ as j}from"./unknown-D_xskH0x.js";import{E as W}from"./ErrorGetData-FJ1oV70m.js";import{I as X,E as Z}from"./icon-heart-bnlu39I5.js";import{u as oo,i as eo,M as so}from"./apiMap-GKZf-fWg.js";import{b as C,g as to}from"./api-yE4gVfV1.js";import{u as ao}from"./errorsStore-03AFZIFR.js";import{I as co,a as no}from"./icon-tg-AI3_BFhL.js";const ro={class:"users-comment"},io={class:"users-comment__container"},lo=["src"],_o={key:1,class:"users-comment__image",src:j,width:"70",height:"70",alt:""},ho={class:"users-comment__name"},mo={class:"users-comment__text"},uo={class:"users-comment__date"},po=b({__name:"CoachInfoCommentItem",props:{commentInfo:{}},setup(c){return(e,v)=>(a(),i("li",ro,[o("div",io,[e.commentInfo.customerAvatarUrl?(a(),i("img",{key:0,class:"users-comment__image",src:e.commentInfo.customerAvatarUrl,width:"70",height:"70",alt:""},null,8,lo)):(a(),i("img",_o)),o("p",ho,r(e.commentInfo.customerFullName),1),o("p",mo,r(e.commentInfo.text),1),o("p",uo,r(e.commentInfo.dateCreated.slice(0,10)),1)])]))}}),A=c=>(L("data-v-691cb18c"),c=c(),E(),c),vo={class:"comments"},fo={class:"comments__container"},go=A(()=>o("p",{class:"comments__title"},"Оставить комментарий",-1)),ko=A(()=>o("button",null,"Отправить",-1)),wo={class:"comments__list"},Io=b({__name:"CoachInfoCommentForm",props:{coachId:{},reviews:{}},setup(c){const e=x(),v=localStorage.getItem("role")==="Customer",_=c,h=P({coachId:_.coachId,reviewText:""}),w=`${C}api/coach/review/${_.coachId}`,m=async()=>{e.loading=!0;try{const n=await fetch(w,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("accessToken")},body:JSON.stringify(h)});if(n.ok){const l=await n.json();_.reviews.push(l),h.reviewText=""}else throw Error}catch(n){throw e.loading=!1,n}e.loading=!1};return(n,l)=>(a(),i("div",vo,[o("div",fo,[v?(a(),i("form",{key:0,class:"comments__form",onSubmit:l[1]||(l[1]=U(u=>m(),["prevent"]))},[go,o("label",null,[V(o("textarea",{id:"",cols:"20",rows:"4","onUpdate:modelValue":l[0]||(l[0]=u=>h.reviewText=u)},null,512),[[F,h.reviewText,void 0,{lazy:!0}]])]),ko],32)):k("",!0),o("ul",wo,[(a(!0),i(O,null,H(_.reviews,u=>(a(),$(po,{commentInfo:u},null,8,["commentInfo"]))),256))])])]))}}),$o=N(Io,[["__scopeId","data-v-691cb18c"]]),Co={xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 50 50"},bo=o("path",{d:"M25 4.063C12.414 4.063 2.063 12.926 2.063 24c0 6.426 3.562 12.094 8.937 15.719-.008.215 0 .547-.281 1.593-.348 1.293-1.035 3.126-2.469 5.157l-1.031 1.437L9 47.938c6.176.027 9.754-4.032 10.313-4.688 1.824.406 3.722.688 5.687.688 12.582 0 22.938-8.864 22.938-19.938S37.582 4.063 25 4.063m0 1.875c11.715 0 21.063 8.152 21.063 18.062S36.715 42.063 25 42.063a24.5 24.5 0 0 1-5.781-.688l-.563-.125-.375.469s-2.89 3.258-7.5 4.031c.832-1.492 1.465-2.879 1.75-3.937.399-1.481.406-2.5.406-2.5v-.5l-.437-.282C7.273 35.22 3.938 29.941 3.938 24 3.938 14.09 13.28 5.938 25 5.938"},null,-1),yo=[bo];function So(c,e){return a(),i("svg",Co,[...yo])}const To={render:So},y=c=>(L("data-v-a3f23810"),c=c(),E(),c),xo={class:"coach"},Lo={class:"coach__logo-container"},Eo={key:0,class:"coach__container"},No={class:"coach__base-info-container"},jo=["src"],Ao={key:1,class:"coach__image",src:j,width:"250",height:"250",alt:""},Mo={class:"coach__fio"},zo={class:"coach__specialization"},Bo=y(()=>o("span",null,"Специализация:",-1)),Do={class:"coach__link-container"},Go=["href"],Po=["href"],Uo={class:"coach__rating-container"},Vo={class:"coach__like-container"},Fo={class:"coach__like-amout"},Oo={class:"coach__comment-container"},Ho={class:"coach__comment-button",href:"#comments"},Jo={class:"coach__comment-amout"},qo={class:"coach__contacts-container"},Ko=y(()=>o("p",{class:"coach__contacts-title"},"Контактная информация",-1)),Ro={class:"coach__tel"},Yo={class:"coach__email"},Qo={class:"coach__address"},Wo={class:"coach__about-container"},Xo=y(()=>o("p",{class:"coach__about-title"},"О себе",-1)),Zo={class:"coach__about"},oe={class:"coach__map"},ee="b9792c26-9b3a-42d8-a4f6-5160e8801ffc",se=b({__name:"CoachInfo",setup(c){const e=oo(),v=x(),_=ao(),h=Y(),w=async()=>{try{const t=`https://geocode-maps.yandex.ru/1.x/?apikey=${ee}&format=json&geocode=${e.address}`,f=await fetch(t);if(f.ok){const S=(await f.json()).response.GeoObjectCollection.featureMember[0].GeoObject.Point.pos.split(" ");e.coords[0]=Number(S[1]),e.coords[1]=Number(S[0]),eo(e.coords)}}catch(t){console.log("Ошибка при получении координат:",t)}},m=I(0),n=I(!1),l=T(()=>h.params.coachId),u=`${C}api/coach/like/${l.value}`,M=async()=>{try{if((await fetch(u,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("accessToken")}})).ok)n.value=!n.value,n.value===!0?++m.value:--m.value;else throw Error}catch{_.showAndHideLeaveLikeError()}},z=`${C}api/coach`,s=I(),B=T(()=>{var t;return(t=s.value)!=null&&t.specializations?s.value.specializations.join(", "):""}),D=async()=>{try{const t=await to(`${z}/${l.value}`);s.value=t,e.address=t.address,m.value=t.likesCount,n.value=t.isLiked,w()}catch{_.showAndHideGettingDataError()}};return J(async()=>{v.loading=!0,await D(),v.loading=!1}),(t,f)=>(a(),i("div",xo,[o("div",Lo,[d(Q,{class:"coach__logo"})]),s.value?(a(),i("div",Eo,[o("div",No,[s.value.avatarUrl?(a(),i("img",{key:0,class:"coach__image",src:s.value.avatarUrl,width:"250",height:"250",alt:"Фото Тренера"},null,8,jo)):(a(),i("img",Ao)),o("p",Mo,r(s.value.fullName),1),o("p",zo,[Bo,g(),o("strong",null,r(B.value),1)]),o("div",Do,[o("a",{class:"coach__social-link",href:s.value.vkLink},[d(p(co),{class:"coach__social-icon"})],8,Go),o("a",{class:"coach__social-link",href:s.value.telegramLink},[d(p(no),{class:"coach__social-icon"})],8,Po)]),o("div",Uo,[o("div",Vo,[o("button",{class:"coach__like-button",onClick:f[0]||(f[0]=G=>M())},[d(p(X),{class:q(["coach__like-icon",{coach_button_liked:n.value}])},null,8,["class"])]),o("span",Fo,r(m.value),1)]),o("div",Oo,[o("a",Ho,[d(p(To),{class:"coach__comment-icon"})]),o("span",Jo,r(s.value.reviews?s.value.reviews.length:0),1)])])]),o("div",qo,[Ko,o("p",Ro,[g("Телефон: "),o("strong",null,r(s.value.phoneNumber),1)]),o("p",Yo,[g("Эл почта: "),o("strong",null,r(s.value.email),1)]),o("p",Qo,[g("Место проведения тренировок: "),o("strong",null,r(s.value.address),1)])]),o("div",Wo,[Xo,o("p",Zo,r(s.value.info),1)]),o("div",oe,[d(so)]),d($o,{class:"coach__comments",id:"comments",coachId:l.value,reviews:s.value.reviews},null,8,["coachId","reviews"])])):k("",!0),p(_).errorGettingData?(a(),$(W,{key:1})):k("",!0),d(R,{name:"error-like"},{default:K(()=>[p(_).errorLeaveLike?(a(),$(Z,{key:0})):k("",!0)]),_:1})]))}}),de=N(se,[["__scopeId","data-v-a3f23810"]]);export{de as default};
